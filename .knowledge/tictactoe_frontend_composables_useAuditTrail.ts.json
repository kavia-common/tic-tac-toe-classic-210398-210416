{"is_source_file": true, "format": "TypeScript", "description": "This file defines a Vue composition function 'useAuditTrail' that provides an in-memory audit trail API for logging actions and capturing game state snapshots with timestamps. It manages audit entries, ensuring they are serializable and guarded against reactive Vue objects, and exposes methods to log entries and generate snapshots.", "external_files": ["@/types/game", "@/utils/serialization"], "external_methods": ["toPlainSafe"], "published": ["useAuditTrail"], "classes": [], "methods": [{"name": "export function useAuditTrail() { useAuditTrail", "description": "Provides an in-memory audit trail API with methods to log actions and capture game state snapshots.", "scope": "", "scopeKind": ""}, {"name": "log", "description": "Adds an audit entry with an ISO timestamp, validating input and sanitizing payloads and state snapshots."}, {"name": "snapshot", "description": "Returns a deep, plain clone of the game state suitable for audit comparisons, handling reactive Vue data."}], "calls": ["toPlainSafe", "entries.value.push"], "search-terms": ["useAuditTrail", "audit trail", "log", "snapshot", "game state audit", "Vue reactive sanitization"], "state": 2, "file_id": 10, "knowledge_revision": 40, "git_revision": "406b222fb4745b1534d094511192b67de8774598", "revision_history": [{"22": ""}, {"40": "406b222fb4745b1534d094511192b67de8774598"}], "ctags": [{"_type": "tag", "name": "e", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-classic-210398-210416/tictactoe_frontend/composables/useAuditTrail.ts", "pattern": "/^      const e = err as Error$/", "language": "TypeScript", "kind": "constant", "scope": "useAuditTrail", "scopeKind": "function"}, {"_type": "tag", "name": "entries", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-classic-210398-210416/tictactoe_frontend/composables/useAuditTrail.ts", "pattern": "/^  const entries = ref<AuditEntry[]>([])$/", "language": "TypeScript", "kind": "constant", "scope": "useAuditTrail", "scopeKind": "function"}, {"_type": "tag", "name": "safeAfter", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-classic-210398-210416/tictactoe_frontend/composables/useAuditTrail.ts", "pattern": "/^      const safeAfter = entry.afterState ? toPlainSafe(entry.afterState) : undefined$/", "language": "TypeScript", "kind": "constant", "scope": "useAuditTrail", "scopeKind": "function"}, {"_type": "tag", "name": "safeBefore", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-classic-210398-210416/tictactoe_frontend/composables/useAuditTrail.ts", "pattern": "/^      const safeBefore = entry.beforeState ? toPlainSafe(entry.beforeState) : undefined$/", "language": "TypeScript", "kind": "constant", "scope": "useAuditTrail", "scopeKind": "function"}, {"_type": "tag", "name": "safePayload", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-classic-210398-210416/tictactoe_frontend/composables/useAuditTrail.ts", "pattern": "/^      const safePayload = entry.payload ? toPlainSafe(entry.payload) : undefined$/", "language": "TypeScript", "kind": "constant", "scope": "useAuditTrail", "scopeKind": "function"}, {"_type": "tag", "name": "toPlainSafe", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-classic-210398-210416/tictactoe_frontend/composables/useAuditTrail.ts", "pattern": "/^      const safeAfter = entry.afterState ? toPlainSafe(entry.afterState) : undefined$/", "language": "TypeScript", "kind": "constant", "scope": "useAuditTrail", "scopeKind": "function"}, {"_type": "tag", "name": "toPlainSafe", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-classic-210398-210416/tictactoe_frontend/composables/useAuditTrail.ts", "pattern": "/^      const safeBefore = entry.beforeState ? toPlainSafe(entry.beforeState) : undefined$/", "language": "TypeScript", "kind": "constant", "scope": "useAuditTrail", "scopeKind": "function"}, {"_type": "tag", "name": "toPlainSafe", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-classic-210398-210416/tictactoe_frontend/composables/useAuditTrail.ts", "pattern": "/^      const safePayload = entry.payload ? toPlainSafe(entry.payload) : undefined$/", "language": "TypeScript", "kind": "constant", "scope": "useAuditTrail", "scopeKind": "function"}, {"_type": "tag", "name": "useAuditTrail", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-classic-210398-210416/tictactoe_frontend/composables/useAuditTrail.ts", "pattern": "/^export function useAuditTrail() {$/", "language": "TypeScript", "kind": "function"}], "hash": "2267d0ec919740493de157d8b0fbfa6d", "format-version": 4, "code-base-name": "tictactoe_frontend", "filename": "tictactoe_frontend/composables/useAuditTrail.ts"}